#!/usr/bin/env sh

# sets vim as default editor, system-wide
sudo apt -y install vim
sudo update-alternatives --set editor /usr/bin/vim.basic

# set sudo password timeout to infinite during the install
sudo apt -y install tee
sudo cp /etc/sudoers /etc/sudoers.bkp
sudo cat /etc/sudoers.bkp | sed 's/env_reset/env_reset, timestamp_timeout=-1/' | sudo tee /etc/sudoers 1>/dev/null

# this installs the apt-add-repository command
sudo apt -y install software-properties-common

# building fish shell from git
sudo apt -y install build-essential ncurses-dev libncurses5-dev gettext autoconf
git clone https://github.com/fish-shell/fish-shell.git
cd fish-shell
autoreconf --no-recursive #if building from Git
./configure
make
sudo make install
cd

echo "/usr/bin/fish" | sudo tee -a /etc/shells
fish ~/dotfiles/bin/setup/,SETUP-MAIN

# restore the sudo password timeout to its default value
sudo mv /etc/sudoers.bkp /etc/sudoers
